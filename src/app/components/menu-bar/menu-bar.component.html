@if(!useMobile){
    <div [class]="menuBarStyleClasses">
        @if(!showMenu) {
            <div [class]="coverStyleClasses"></div>
        }
        @for(item of model$ | async; track item.label) {
            <div [class]="menuItemStyleClasses">
                <button 
                    type="button" 
                    [class]="menuBarButtonStyleClasses"
                    [attr.aria-expanded]="item.isExpanded"
                    aria-controls="collapseBasic"
                >
                    {{item.label}}
                </button>
    
                <div id="collapseBasic" [collapse]="!item.isExpanded" [isAnimated]="true">
                    <div [class]="subMenuStyleClasses">
                        
                        @for(subItem of item.items; track subItem.label) {
                            <span [class]="subMenuItemStyleClasses">{{subItem.label}}</span>
                        }
                        
                        @if(usePennant) {
                            <ws-svg></ws-svg>
                        }
                    </div>
                </div>
            </div>
        }
    </div>
}
@else {
    <div [class]="menuBarStyleClasses">
        @if(!showMenu) {
            <div [class]="coverStyleClasses"></div>
        }

        @for(item of model$ | async; track item.label) {
            <div #topMenuItem [class]="menuItemStyleClasses">
                <button 
                    type="button" 
                    [class]="menuBarButtonStyleClasses"
                    [attr.aria-expanded]="item.isExpanded"
                    aria-controls="collapseBasic"
                    (click)="handleItemClick(item)"
                >
                    {{item.label}}
                </button>
    
                <div [class]="subMenuMobileWrapperStyleClasses">
                    <div id="collapseBasic" [collapse]="!item.isExpanded" [isAnimated]="true">
                        <div [class]="subMenuStyleClasses">
                            
                            @for(menuItem of item.items; track menuItem.label) {
                                <span #subMenuItem
                                    [class]="subMenuItemStyleClasses"
                                    aria-controls="collapseBasicSub"
                                    (click)="handleItemClick(menuItem)"
                                >
                                    {{menuItem.label}}
                                </span>
    
                                <div id="collapseBasicSub" [collapse]="!menuItem.isExpanded" [isAnimated]="true">
                                    <div [class]="subMenuStyleClasses">
                                        
                                        @for(subItem of menuItem.items; track subItem.label) {
                                            <span [class]="mobileItemStyleClasses">{{subItem.label}}</span>
                                        }
                                        
                                    </div>
                                </div>
                            }
    
                            @if(useSpacer) {
                                <div class="spacer"></div>
                            }

                            @if(usePennant) {
                                <ws-svg></ws-svg>
                            }
                            
                        </div>
                    </div>
                </div >
            </div>
        }
    </div>
}